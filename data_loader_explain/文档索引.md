# NJF ToyArm 适配 4DGaussians - 文档索引

本文件夹包含将 Neural-Jacobian-Field (NJF) ToyArm 数据集适配到 4DGaussians 的完整文档。

---

## 📖 文档列表

### 🚀 快速开始（推荐从这里开始）

| 文档 | 说明 | 适合人群 |
|-----|------|---------|
| **README.md** | **操作手册** - 两种方案的代码修改和操作步骤 | 所有用户 |
| **QUICKSTART.md** | 5分钟快速上手指南 | 新手用户 |

### 📚 详细文档

| 文档 | 说明 | 何时查看 |
|-----|------|---------|
| **方案对比说明.md** | 两种方案的详细对比和选择建议 | 选择方案时 |
| **NJF_TOYARM_ADAPTATION_GUIDE.md** | 数据格式详细对比和技术细节 | 理解数据格式时 |
| **INTEGRATION_GUIDE.md** | 方案二的完整代码集成指南 | 选择方案二时 |
| **关节位置差值u的使用说明.md** | u字段的详细说明和使用方法 | 使用u进行训练时 |

### 📄 其他文档

| 文档 | 说明 |
|-----|------|
| **SOLUTION_SUMMARY.md** | 项目总结和学习价值 |
| **README_NJF_ADAPTATION.md** | 项目概览（旧版） |

---

## 🎯 阅读建议

### 方案一（数据转换）用户

1. **README.md** - 查看"方案一"部分
2. **QUICKSTART.md** - 跟随步骤操作
3. **关节位置差值u的使用说明.md** - 了解如何使用u字段
4. （可选）**方案对比说明.md** - 了解为什么选择方案一

### 方案二（代码集成）用户

1. **README.md** - 查看"方案二"部分的代码修改清单
2. **INTEGRATION_GUIDE.md** - 详细的代码修改指南
3. **关节位置差值u的使用说明.md** - 了解如何使用u字段
4. （可选）**NJF_TOYARM_ADAPTATION_GUIDE.md** - 理解数据格式差异

### 还在选择方案的用户

1. **README.md** - 快速了解两种方案
2. **方案对比说明.md** - 详细对比帮助选择
3. **QUICKSTART.md** - 先用方案一快速测试

---

## 📊 文档更新历史

### v3.0 (2025-10-29)
- ✅ 添加关节位置差值u的计算功能
- ✅ 更新所有文档以反映u功能
- ✅ 创建 README.md 操作手册
- ✅ 创建本索引文档

### v2.0 (2025-10-28)
- ✅ 创建详细的u使用说明文档
- ✅ 修改转换脚本和数据加载器支持u计算

### v1.0 (2025-10-28)
- ✅ 初始版本
- ✅ 两种适配方案
- ✅ 基础文档

---

## 🔑 核心概念

### 关节位置差值 u

**定义**：u = current_joint_pos - previous_joint_pos

**用途**：作为条件控制信号用于4DGaussians训练

**计算方式**：
- 每个相机独立计算（12个相机各自跟踪）
- 第一帧 u = [0, 0, 0, 0, 0, 0]
- 按时间排序后顺序计算

**在哪里**：
- 方案一：保存在transforms_train.json和transforms_test.json的每个frame中
- 方案二：在CameraInfoWithU对象的u字段中

### 两种方案

**方案一：数据转换**
- 运行 convert_njf_to_4dgs.py 脚本
- 生成新的transforms.json文件（包含u）
- 无需修改4DGaussians代码

**方案二：代码集成**
- 修改scene/dataset_readers.py等文件
- 直接读取原始NJF数据
- 运行时动态计算u

---

## 💡 快速参考

### 方案一：一条命令开始

```bash
# 转换数据
python convert_njf_to_4dgs.py \
    --input d:\Codee\neural-jacobian-field\data\toyarm\transforms.json \
    --output d:\Codee\4DGaussians\data\toyarm_converted

# 创建符号链接
cd d:\Codee\4DGaussians\data\toyarm_converted
0..11 | ForEach-Object { cmd /c mklink /J "view_$_" "d:\Codee\neural-jacobian-field\data\toyarm\view_$_" }

# 训练
python train.py -s data\toyarm_converted -m output\exp1 --eval
```

### 方案二：需要修改的文件

```
✅ scene/njf_toyarm_loader.py (复制)
✅ scene/dataset_readers.py (修改2处)
⚠️ arguments/__init__.py (可选)
⚠️ scene/__init__.py (可选)
```

---

## ❓ 常见问题快速索引

| 问题 | 查看文档 | 章节 |
|-----|---------|------|
| 如何选择方案？ | 方案对比说明.md | 选择建议 |
| 找不到图像文件？ | README.md | 常见问题 Q1 |
| 相机视角不对？ | README.md | 常见问题 Q2 |
| 训练很慢？ | README.md | 常见问题 Q3 |
| 如何验证u的正确性？ | README.md | 常见问题 Q4 |
| 如何在训练中使用u？ | 关节位置差值u的使用说明.md | 在4DGaussians中使用u |
| u的维度是多少？ | 关节位置差值u的使用说明.md | 常见问题 Q3 |
| 为什么第一帧u是0？ | 关节位置差值u的使用说明.md | 常见问题 Q1 |

---

## 📞 获取帮助

1. 按照上述阅读建议查看相关文档
2. 使用本索引快速定位问题
3. 查看README.md中的常见问题部分

---

**建议**：先阅读 **README.md** 了解整体框架，再根据需要查看其他文档。

**快速测试**：直接跟随 **QUICKSTART.md** 进行5分钟快速测试。
